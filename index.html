<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>é¢†ä¸»å®çŸ³ | å‡çº§è®¡ç®—é¡µé¢</title>
  <style>
    :root {
      --bg: #0f172a;
      --card: #111827;
      --muted: #9ca3af;
      --fg: #e5e7eb;
      --accent: #f59e0b;
      --accent-2: #22d3ee;
      --border: #1f2937;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--fg);
      background: linear-gradient(180deg, #0b1023 0%, #0f172a 100%);
      min-height: 100vh;
    }
    header {
      position: sticky; top: 0; z-index: 10;
      background: rgba(15, 23, 42, 0.7);
      -webkit-backdrop-filter: blur(8px);
      backdrop-filter: blur(8px);
      border-bottom: 1px solid var(--border);
    }
    .container {
      max-width: 1180px; margin: 0 auto; padding: 16px 20px;
      display: grid; grid-template-columns: 1fr 320px; gap: 20px;
    }
    h1 { text-align: center; font-size: 32px; margin: 18px 0; letter-spacing: 2px; }

    nav { display: flex; justify-content: center; gap: 16px; padding: 8px 0 16px; }
    nav a { color: #7dd3fc; font-weight: 600; text-decoration: none; }
    nav a:hover { text-decoration: underline; }

    .container { max-width: 1180px; margin: 0 auto; padding: 16px 20px; display: grid; grid-template-columns: 1fr 360px; gap: 20px; }
    @media (max-width: 960px) { .container { grid-template-columns: 1fr; } .aside { position: static; } }

    
    .card { background: var(--card); border: 1px solid var(--border); border-radius: 14px; overflow: hidden; }
    .table-wrap { overflow: auto; border-radius: 14px; }
    table { width: 100%; border-collapse: collapse; }
    thead th { position: sticky; top: 0; background: #0b1224; }
    th, td { padding: 14px 12px; text-align: center; border-bottom: 1px solid var(--border); }
    th { font-weight: 700; }
    tbody tr:hover { background: rgba(34, 211, 238, 0.06); }
    .aside { position: sticky; top: 72px; align-self: start; }
    .panel { padding: 16px; }
    .panel h2 { font-size: 20px; margin: 0 0 12px; }
    .field { display: grid; grid-template-columns: 110px 1fr; align-items: center; gap: 10px; margin: 10px 0; }
    select, input[type="number"] {
      width: 100%; padding: 10px 12px; border-radius: 10px; border: 1px solid var(--border); background: #0b1023; color: var(--fg);
    }
    .btn { width: 100%; margin-top: 8px; padding: 12px 14px; border-radius: 12px; border: 1px solid transparent; color: white; font-weight: 700; cursor: pointer; background: linear-gradient(90deg, var(--accent) 0%, #ef4444 40%, var(--accent-2) 100%); }
    .btn:hover { filter: brightness(1.05); }
    .result {
      margin-top: 14px; padding: 12px; border: 1px dashed var(--border); border-radius: 12px; background: #0b1023;
    }
    .muted { color: var(--muted); font-size: 13px; }
    .tag { display:inline-block; padding: 2px 8px; border: 1px solid var(--border); border-radius: 999px; font-size: 12px; color: var(--muted); margin-right: 6px; }
    footer { text-align: center; color: var(--muted); padding: 30px 0 40px; }
    a { color: #7dd3fc; text-decoration: none; }
    a:hover { text-decoration: underline; }
    @media (max-width: 960px) {
      .container { grid-template-columns: 1fr; }
      .aside { position: static; }
    }
    th .icon {
  width: 25px;     /* å›¾æ ‡å®½åº¦æ›´å° */
  height: 25px;    /* å›¾æ ‡é«˜åº¦æ›´å° */
  object-fit: contain;
  margin-right: 4px;
  vertical-align: middle;
}
    /* .goog-te-gadget-icon {
  display: none !important;
}
.goog-te-banner-frame {
    display: none !important;
}
.goog-te-banner {
    display: none !important;
} */
/* æ‚¬æµ®æŒ‰é’® */
.donate-btn {
  position: fixed;
  right: 20px;
  bottom: 20px;
  padding: 12px 18px;
  font-size: 15px;
  background: linear-gradient(90deg, #f59e0b, #ef4444, #22d3ee);
  border: none;
  border-radius: 12px;
  color: white;
  cursor: pointer;
  font-weight: bold;
  z-index: 999;
  box-shadow: 0 4px 12px rgba(0,0,0,.3);
}
.donate-btn:hover {
  filter: brightness(1.1);
}

/* å³ä¾§é®ç½©å±‚ */
.donate-mask {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  opacity: 0;
  pointer-events: none;
  transition: 0.25s;
  z-index: 998;
}

/* é¢æ¿æœ¬ä½“ */
.donate-panel {
  position: fixed;
  top: 0;
  right: -320px;
  width: 320px;
  height: 100vh;
  background: #111827;
  border-left: 1px solid #1f2937;
  padding: 20px;
  box-shadow: -4px 0 10px rgba(0,0,0,.4);
  transition: 0.3s;
  z-index: 999;
  text-align: center;
}

.donate-panel h2 {
  margin-top: 10px;
  color: #7dd3fc;
}

.tip {
  color: #94a3b8;
  font-size: 14px;
  margin-bottom: 10px;
}

.donate-qrcode {
  width: 80%;
  border-radius: 12px;
  border: 1px solid #334155;
  box-shadow: 0 4px 10px rgba(0,0,0,.4);
  margin: 10px auto;
}

.thanks {
  color: #94a3b8;
  font-size: 14px;
  margin-top: 10px;
}
 
/* æ‰“å¼€çŠ¶æ€ */
.donate-mask.show {
  opacity: 1;
  pointer-events: auto;
}

.donate-panel.show {
  right: 0;
}

  </style>
</head>
<body>
  <header>
    <!-- <div style="display:flex; justify-content:space-between; align-items:center; padding:0 20px;"> -->

      <h1 id="title">é¢†ä¸»å®çŸ³</h1>

      <!-- <div id="google_translate_element" class="lang-box"></div> -->

    <!-- </div> -->
  
    <nav>
      <a id="nav-gem" href="index.html" style="color:var(--accent);">å½“å‰é¡µï¼šé¢†ä¸»å®çŸ³</a>
      <a id="nav-gear" href="lord-gear.html">é¢†ä¸»è£…å¤‡</a>
      <a id="nav-fire" href="fc.html">ç«æ™¶å‡çº§</a>
      <a id="nav-pet" href="pet.html">å® ç‰©å‡çº§</a>
      <a href="expert.html">ä¸“å®¶å‡çº§</a>
      <a href="war-academy.html">æˆ˜äº‰å­¦é™¢</a>
      
    </nav>
  </header>
  <!-- <header>
    <div class="container" style="grid-template-columns: 1fr;">
      <div style="display:flex; align-items:center; justify-content:space-between; gap:16px;">
        <h1>é¢†ä¸»å®çŸ³</h1>
        <nav>
            <a href="index.html">é¢†ä¸»å®çŸ³</a>
            <a href="lord-gear.html">é¢†ä¸»è£…å¤‡</a>
        </nav>
      </div>
    </div>
  </header> -->
  
  <main class="container">
    <section class="card table-wrap" aria-label="ææ–™è¡¨æ ¼">
      <table id="gem-table">
        <thead>
          <tr>
            <th>
              ç­‰çº§
            </th>
            <th>
              <img src="img/guide.png" class="icon"> å®çŸ³æ‰‹å†Œ
            </th>
            <th>
              <img src="img/design.png" class="icon"> å®çŸ³å›¾çº¸
            </th>
            <th>
              <img src="img/secret.png" class="icon"> å®çŸ³ç§˜å…¸
            </th>
          </tr>
        </thead>
        
        <tbody></tbody>
      </table>
    </section>
    <aside class="aside card">
      <!-- <hr style="margin:20px 0; border-color: var(--border);" /> -->

      <div class="panel">
        <h2>ç´¯åŠ è®¡ç®—å™¨</h2>

        <div class="field">
          <label for="acc-start">èµ·å§‹ç­‰çº§ï¼š</label>
          <select id="acc-start"></select>
        </div>

        <div class="field">
          <label for="acc-end">æœ€ç»ˆç­‰çº§ï¼š</label>
          <select id="acc-end"></select>
        </div>

        <div class="field">
          <label for="acc-count">å‡çº§æ•°é‡ï¼š</label>
          <select id="acc-count">
          </select>
        </div>        

        <button id="acc-add" class="btn">æ·»åŠ </button>

        <div id="acc-list" class="result" style="margin-top:12px; padding: 5px;">
          <div class="muted">æš‚æ— è®°å½•</div>
        </div>

        <button id="acc-clear" class="btn" style="margin-top:12px;background:#ef4444;">
          æ¸…ç©º
        </button>
      </div>
    </aside>
  </main>

  <!-- <button id="donateBtn" class="donate-btn">æ”¯æŒä¸€ä¸‹ â¤ï¸</button> -->
  <!-- é®ç½© -->
  <!-- <div id="donateMask" class="donate-mask"></div>

  
  <div id="donatePanel" class="donate-panel">
      <h2>æ”¯æŒä¸€ä¸‹å¼€å‘è€… ğŸ³</h2>
      <p class="tip">å¦‚æœæœ¬å·¥å…·å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¯ä»¥æ‰«ç æ‰“èµï¼Œæ„Ÿè°¢æ”¯æŒ â¤ï¸</p>

      <img src="img/pay.png" class="donate-qrcode">

      <p class="thanks">ä½ çš„æ”¯æŒæ˜¯æˆ‘æŒç»­æ›´æ–°çš„åŠ¨åŠ›ï¼</p>
  </div> -->

  <!-- <footer>
    ç¤ºä¾‹ï¼Œä¾¿äºäºŒæ¬¡å¼€å‘ä¸è‡ªå®šä¹‰æ ·å¼ã€‚ | ç”± <a href="https://pages.github.com/" target="_blank" rel="noreferrer">GitHub Pages</a> æ‰˜ç®¡
  </footer> -->

  
  <script>
    const rows = [
      { id: 1, manual: 5, paper: 5, secret: 0 },
      { id: 2, manual: 40, paper: 15, secret: 0 },
      { id: 3, manual: 60, paper: 40, secret: 0 },
      { id: 4, manual: 80, paper: 100, secret: 0 },
      { id: 5, manual: 100, paper: 200, secret: 0 },
      { id: 6, manual: 120, paper: 300, secret: 0 },
      { id: 7, manual: 140, paper: 400, secret: 0 },
      { id: 8, manual: 200, paper: 400, secret: 0 },
      { id: 9, manual: 300, paper: 400, secret: 0 },
      { id: 10, manual: 420, paper: 420, secret: 0 },
      { id: 11, manual: 560, paper: 420, secret: 0 },
      { id: 12, manual: 580, paper: 450, secret: 15 },
      { id: 13, manual: 580, paper: 450, secret: 30 },
      { id: 14, manual: 600, paper: 500, secret: 45 },
      { id: 15, manual: 600, paper: 500, secret: 70 },
      { id: 16, manual: 650, paper: 550, secret: 100 },
    ];

    const tbody = document.querySelector('#gem-table tbody');
    rows.forEach(r => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${r.id}</td>
        <td>${r.manual}</td>
        <td>${r.paper}</td>
        <td>${r.secret}</td>
      `;
      tbody.appendChild(tr);
    });

// ======== åŒºé—´ç´¯åŠ è®¡ç®—å™¨ï¼ˆæ”¯æŒå‡çº§ä»¶æ•°ï¼‰ ========

// å¡«å……ä¸‹æ‹‰æ¡†
const accStartSel = document.querySelector("#acc-start");
const accEndSel = document.querySelector("#acc-end");

rows.forEach(r => {
  const o1 = document.createElement("option");
  o1.value = r.id;
  o1.textContent = r.id;
  accStartSel.appendChild(o1);

  const o2 = document.createElement("option");
  o2.value = r.id;
  o2.textContent = r.id;
  accEndSel.appendChild(o2);
});
// å¡«å……å‡çº§æ•°é‡ä¸‹æ‹‰æ¡†ï¼ˆ1 ~ 18ï¼‰
const countSel = document.getElementById("acc-count");
for(let i = 1; i <= 18; i++){
  const opt = document.createElement("option");
  opt.value = i;
  opt.textContent = i;
  countSel.appendChild(opt);
}

accStartSel.value = 1;
accEndSel.value = 1;

// åŒºé—´æ•°æ®
let accRanges = [];

function renderAccList() {
  const box = document.querySelector("#acc-list");

  if (accRanges.length === 0) {
    box.innerHTML = `<div class="muted">æš‚æ— è®°å½•</div>`;
    return;
  }

  let totalManual = 0, totalPaper = 0, totalSecret = 0;

  let html = accRanges.map((item, index) => {
    totalManual += item.manual;
    totalPaper += item.paper;
    totalSecret += item.secret;

    return `
      <div style="margin-bottom:10px; padding-bottom:10px; border-bottom:1px solid var(--border);">
        
        <div style="
            display:flex;
            justify-content:space-between;
            align-items:center;
            margin-bottom:4px;">
          
          <span>
            ç­‰çº§ï¼š<b>${item.start} â†’ ${item.end}</b>
            ï¼ˆæ•°é‡ Ã— ${item.count}ï¼‰
          </span>

          <button class="del-btn"
            data-index="${index}"
            style="
              background:#ef4444;
              border:none;
              padding:4px 10px;
              border-radius:6px;
              color:white;
              cursor:pointer;
              font-size:12px;">
            åˆ é™¤
          </button>

        </div>

        æ‰‹å†Œ <b>${item.manual}</b>ï½œ
        å›¾çº¸ <b>${item.paper}</b>ï½œ
        ç§˜å…¸ <b>${item.secret}</b>

      </div>
    `;
  }).join("");

  html += `
  <hr style="margin:10px 0; border-color:var(--border);">
  <div style="display:flex; align-items:center; gap:12px; font-size:15px;">
    <b>æ€»è®¡ï¼š</b>
    <!-- æ‰‹å†Œ -->
    <div style="display:flex; align-items:center; gap:4px;">
      <img src="img/guide.png" style="width:18px;height:18px;">
      <span>æ‰‹å†Œ</span>
      <span> ${totalManual} </span>
    </div>

    <!-- å›¾çº¸ -->
    <div style="display:flex; align-items:center; gap:4px;">
      <img src="img/design.png" style="width:18px;height:18px;">
      <span>å›¾çº¸</span>
      <span> ${totalPaper} </span>
    </div>

    <!-- ç§˜å…¸ -->
    <div style="display:flex; align-items:center; gap:4px;">
      <img src="img/secret.png" style="width:18px;height:18px;">
      <span>ç§˜å…¸</span>
      <span> ${totalSecret} </span>
    </div>

  </div>
`;


  box.innerHTML = html;

  // ç»‘å®šåˆ é™¤äº‹ä»¶
  document.querySelectorAll(".del-btn").forEach(btn => {
    btn.onclick = function () {
      const i = parseInt(this.dataset.index);
      accRanges.splice(i, 1);
      renderAccList();
    };
  });
}


// æ·»åŠ åŒºé—´
document.querySelector("#acc-add").onclick = function () {
  const s = parseInt(accStartSel.value);
  const e = parseInt(accEndSel.value);
  const c = Math.max(1, parseInt(document.querySelector("#acc-count").value));

  if (e <= s) {
    alert("æœ€ç»ˆç­‰çº§ä¸èƒ½å°äºèµ·å§‹ç­‰çº§ï¼");
    return;
  }

  // è®¡ç®—åŒºé—´
  let manual = 0, paper = 0, secret = 0;
  for (const r of rows) {
    if (r.id > s && r.id <= e) {
      manual += r.manual;
      paper += r.paper;
      secret += r.secret;
    }
  }

  manual *= c;
  paper *= c;
  secret *= c;

  accRanges.push({
    start: s,
    end: e,
    count: c,
    manual,
    paper,
    secret
  });

  renderAccList();
};

// æ¸…ç©º
document.querySelector("#acc-clear").onclick = function () {
  accRanges = [];
  renderAccList();
};

const btn = document.getElementById("donateBtn");
const panel = document.getElementById("donatePanel");
const mask = document.getElementById("donateMask");

btn.onclick = () => {
  panel.classList.add("show");
  mask.classList.add("show");
};

mask.onclick = () => {
  panel.classList.remove("show");
  mask.classList.remove("show");
};


</script>



</body>
</html>
