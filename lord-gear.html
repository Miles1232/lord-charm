<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>é¢†ä¸»è£…å¤‡ | å‡çº§è®¡ç®—é¡µé¢</title>
  <style>
    :root {
      --bg: #0f172a;
      --card: #111827;
      --muted: #9ca3af;
      --fg: #e5e7eb;
      --accent: #f59e0b;
      --accent-2: #22d3ee;
      --border: #1f2937;
    }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; color: var(--fg); background: linear-gradient(180deg, #0b1023 0%, #0f172a 100%); min-height: 100vh; }
    header { position: sticky; top: 0; z-index: 10; background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(8px); border-bottom: 1px solid var(--border); }
    h1 { text-align: center; font-size: 32px; margin: 16px 0 8px; letter-spacing: 2px; }
    nav { display: flex; justify-content: center; gap: 16px; padding: 8px 0 16px; }
    nav a { color: #7dd3fc; font-weight: 600; text-decoration: none; }
    nav a:hover { text-decoration: underline; }

    .container { max-width: 1180px; margin: 0 auto; padding: 16px 20px; display: grid; grid-template-columns: 1fr 400px; gap: 20px; }
    @media (max-width: 960px) { .container { grid-template-columns: 1fr; } .aside { position: static; } }

    .card { background: var(--card); border: 1px solid var(--border); border-radius: 14px; overflow: hidden; }
    .table-wrap { overflow: auto; border-radius: 14px; }
    table { width: 100%; border-collapse: collapse; }
    thead th { position: sticky; top: 0; background: #0b1224; }
    th, td { padding: 12px 10px; text-align: center; border-bottom: 1px solid var(--border); }
    tbody tr:hover { background: rgba(34, 211, 238, 0.06); }

    .aside { position: sticky; top: 72px; align-self: start; }
    .panel { padding: 16px; }
    .panel h2 { font-size: 20px; margin: 0 0 12px; }
    .field { display: grid; grid-template-columns: 110px 1fr; align-items: center; gap: 10px; margin: 10px 0; }
    select, input[type="number"] { width: 100%; padding: 10px 12px; border-radius: 10px; border: 1px solid var(--border); background: #0b1023; color: var(--fg); }
    .btn { width: 100%; margin-top: 8px; padding: 12px 14px; border-radius: 12px; border: 1px solid transparent; color: white; font-weight: 700; cursor: pointer; background: linear-gradient(90deg, var(--accent) 0%, #ef4444 40%, var(--accent-2) 100%); }
    .btn:hover { filter: brightness(1.05); }
    .result { margin-top: 14px; padding: 12px; border: 1px dashed var(--border); border-radius: 12px; background: #0b1023; }
    .muted { color: var(--muted); font-size: 13px; }
    #old-calc-panel {
      display: none;
    }
    .mat-icon {
  width: 25px;
  height: 25px;
  vertical-align: middle;
  opacity: 0.9;
}

  </style>
</head>
<body>
  <header>
    <h1>é¢†ä¸»è£…å¤‡</h1>
    <nav>
      <a href="index.html">é¢†ä¸»å®çŸ³</a>
      <a href="lord-gear.html">å½“å‰é¡µï¼šé¢†ä¸»è£…å¤‡</a>
      <a href="fc.html">ç«æ™¶å‡çº§</a>
      <a href="pet.html">å® ç‰©å‡çº§</a>
    </nav>
  </header>

  <main class="container">
    <section class="card table-wrap" aria-label="è£…å¤‡è¡¨æ ¼">
      <table id="equip-table">
        <thead>
          <tr>
            <th>ç­‰çº§</th>
        
            <th>
              <img src="img/alloy.png" class="mat-icon">
              åˆé‡‘
            </th>
        
            <th>
              <img src="img/solution.png" class="mat-icon">
              æŠ›å…‰æ¶²
            </th>
        
            <th>
              <img src="img/plan.png" class="mat-icon">
              å·è½´
            </th>
        
            <th>
              <img src="img/amber.png" class="mat-icon">
              ç¥ç€
            </th>
          </tr>
        </thead>
        
        <tbody></tbody>
      </table>
    </section>

    <aside class="aside card">

      <div class="panel">
        <h2>ææ–™è®¡ç®—å™¨</h2>

        <div class="field">
          <label for="acc-start">èµ·å§‹ç­‰çº§ï¼š</label>
          <select id="acc-start"></select>
        </div>

        <div class="field">
          <label for="acc-end">æœ€ç»ˆç­‰çº§ï¼š</label>
          <select id="acc-end"></select>
        </div>

        <div class="field">
          <label for="acc-count">ä»¶æ•°ï¼š</label>
          <select id="acc-count">
          </select>
        </div> 

        <button id="acc-add" class="btn">æ·»åŠ </button>

        <div id="acc-list" class="result" style="margin-top:12px; padding: 5px;">
          <div class="muted">æš‚æ— è®°å½•</div>
        </div>

        <button id="acc-clear" class="btn" style="margin-top:12px;background:#ef4444;">
          æ¸…ç©º
        </button>
      </div>
    </aside>
  </main>

  <!-- <footer style="text-align:center; color:#9ca3af; padding: 24px 0 40px;">
    é¡µé¢ç”± GitHub Pages æ‰˜ç®¡ | å¯ä¸å®çŸ³é¡µé£æ ¼ç»Ÿä¸€
  </footer> -->

  <script>
    // 1â€“42 çº§æ•°æ®ï¼ˆæ¥è‡ªä½ æä¾›çš„å›¾ç‰‡ï¼‰
    const rows = [
      { id: 1,  tier: 'è‰¯å¥½',        alloy: 1500,  polish: 15,   scroll: 0,   moon: 0 },
      { id: 2,  tier: 'è‰¯å¥½1æ˜Ÿ',      alloy: 3800,  polish: 40,   scroll: 0,   moon: 0 },
      { id: 3,  tier: 'ç¨€æœ‰',        alloy: 7000,  polish: 70,   scroll: 0,   moon: 0 },
      { id: 4,  tier: 'ç¨€æœ‰1æ˜Ÿ',      alloy: 9700,  polish: 95,   scroll: 0,   moon: 0 },
      { id: 5,  tier: 'ç¨€æœ‰2æ˜Ÿ',      alloy: 0,     polish: 0,    scroll: 45,  moon: 0 },
      { id: 6,  tier: 'ç¨€æœ‰3æ˜Ÿ',      alloy: 0,     polish: 0,    scroll: 50,  moon: 0 },
      { id: 7,  tier: 'å²è¯—',        alloy: 0,     polish: 0,    scroll: 60,  moon: 0 },
      { id: 8,  tier: 'å²è¯—1æ˜Ÿ',      alloy: 0,     polish: 0,    scroll: 70,  moon: 0 },
      { id: 9,  tier: 'å²è¯—2æ˜Ÿ',      alloy: 6500,  polish: 65,   scroll: 40,  moon: 0 },
      { id:10,  tier: 'å²è¯—3æ˜Ÿ',      alloy: 8000,  polish: 80,   scroll: 50,  moon: 0 },
      { id:11,  tier: 'å²è¯—T1',      alloy: 10000, polish: 95,   scroll: 60,  moon: 0 },
      { id:12,  tier: 'å²è¯—T1-1æ˜Ÿ',   alloy: 11000, polish: 110,  scroll: 70,  moon: 0 },
      { id:13,  tier: 'å²è¯—T1-2æ˜Ÿ',   alloy: 13000, polish: 130,  scroll: 85,  moon: 0 },
      { id:14,  tier: 'å²è¯—T1-3æ˜Ÿ',   alloy: 15000, polish: 160,  scroll: 100, moon: 0 },
      { id:15,  tier: 'ä¼ è¯´',        alloy: 22000, polish: 220,  scroll: 40,  moon: 0 },
      { id:16,  tier: 'ä¼ è¯´1æ˜Ÿ',      alloy: 23000, polish: 230,  scroll: 40,  moon: 0 },
      { id:17,  tier: 'ä¼ è¯´2æ˜Ÿ',      alloy: 25000, polish: 250,  scroll: 45,  moon: 0 },
      { id:18,  tier: 'ä¼ è¯´3æ˜Ÿ',      alloy: 26000, polish: 260,  scroll: 45,  moon: 0 },
      { id:19,  tier: 'ä¼ è¯´T1',      alloy: 28000, polish: 280,  scroll: 45,  moon: 0 },
      { id:20,  tier: 'ä¼ è¯´T1-1æ˜Ÿ',   alloy: 30000, polish: 300,  scroll: 55,  moon: 0 },
      { id:21,  tier: 'ä¼ è¯´T1-2æ˜Ÿ',   alloy: 32000, polish: 320,  scroll: 55,  moon: 0 },
      { id:22,  tier: 'ä¼ è¯´T1-3æ˜Ÿ',   alloy: 35000, polish: 340,  scroll: 55,  moon: 0 },
      { id:23,  tier: 'ä¼ è¯´T2',      alloy: 38000, polish: 360,  scroll: 55,  moon: 0 },
      { id:24,  tier: 'ä¼ è¯´T2-1æ˜Ÿ',   alloy: 43000, polish: 430,  scroll: 75,  moon: 0 },
      { id:25,  tier: 'ä¼ è¯´T2-2æ˜Ÿ',   alloy: 45000, polish: 460,  scroll: 80,  moon: 0 },
      { id:26,  tier: 'ä¼ è¯´T2-3æ˜Ÿ',   alloy: 48000, polish: 500,  scroll: 85,  moon: 0 },
      { id:27,  tier: 'ç¥è¯',        alloy: 50000, polish: 530,  scroll: 85,  moon: 10 },
      { id:28,  tier: 'ç¥è¯1æ˜Ÿ',      alloy: 52000, polish: 560,  scroll: 90,  moon: 10 },
      { id:29,  tier: 'ç¥è¯2æ˜Ÿ',      alloy: 54000, polish: 590,  scroll: 95,  moon: 10 },
      { id:30,  tier: 'ç¥è¯3æ˜Ÿ',      alloy: 56000, polish: 620,  scroll: 100, moon: 10 },
      { id:31,  tier: 'ç¥è¯T1',      alloy: 59000, polish: 670,  scroll: 110, moon: 15 },
      { id:32,  tier: 'ç¥è¯T1-1æ˜Ÿ',   alloy: 61000, polish: 700,  scroll: 115, moon: 15 },
      { id:33,  tier: 'ç¥è¯T1-2æ˜Ÿ',   alloy: 63000, polish: 730,  scroll: 120, moon: 15 },
      { id:34,  tier: 'ç¥è¯T1-3æ˜Ÿ',   alloy: 65000, polish: 760,  scroll: 125, moon: 15 },
      { id:35,  tier: 'ç¥è¯T2',      alloy: 68000, polish: 810,  scroll: 135, moon: 20 },
      { id:36,  tier: 'ç¥è¯T2-1æ˜Ÿ',   alloy: 70000, polish: 840,  scroll: 140, moon: 20 },
      { id:37,  tier: 'ç¥è¯T2-2æ˜Ÿ',   alloy: 72000, polish: 870,  scroll: 145, moon: 20 },
      { id:38,  tier: 'ç¥è¯T2-3æ˜Ÿ',   alloy: 74000, polish: 900,  scroll: 150, moon: 20 },
      { id:39,  tier: 'ç¥è¯T3',      alloy: 77000, polish: 950,  scroll: 160, moon: 25 },
      { id:40,  tier: 'ç¥è¯T3-1æ˜Ÿ',   alloy: 80000, polish: 990,  scroll: 165, moon: 25 },
      { id:41,  tier: 'ç¥è¯T3-2æ˜Ÿ',   alloy: 83000, polish: 1030, scroll: 170, moon: 25 },
      { id:42,  tier: 'ç¥è¯T3-3æ˜Ÿ',   alloy: 86000, polish: 1070, scroll: 180, moon: 25 },
      { id: 43, tier: 'ç¥è¯T4',     alloy: 120000, polish: 1500, scroll: 250, moon: 40 },
      { id: 44, tier: 'ç¥è¯T4-1æ˜Ÿ', alloy: 140000, polish: 1650, scroll: 275, moon: 40 },
      { id: 45, tier: 'ç¥è¯T4-2æ˜Ÿ', alloy: 160000, polish: 1800, scroll: 300, moon: 40 },
      { id: 46, tier: 'ç¥è¯T4-3æ˜Ÿ', alloy: 180000, polish: 1950, scroll: 325, moon: 40 },
          ];

    // æ¸²æŸ“è¡¨æ ¼
    const tbody = document.querySelector('#equip-table tbody');
    rows.forEach(r => {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${r.tier}</td><td>${r.alloy}</td><td>${r.polish}</td><td>${r.scroll}</td><td>${r.moon}</td>`;
      tbody.appendChild(tr);
    });

    /* =============================
       âœ¨ åŒºé—´ç´¯åŠ è®¡ç®—å™¨ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
       ============================= */

    const accStart = document.querySelector('#acc-start');
    const accEnd   = document.querySelector('#acc-end');

    /* å¡«å……ç´¯åŠ è®¡ç®—å™¨ä¸‹æ‹‰ */
    rows.forEach(r => {
      const o1 = document.createElement('option'); o1.value = r.id; o1.textContent = r.tier; accStart.appendChild(o1);
      const o2 = document.createElement('option'); o2.value = r.id; o2.textContent = r.tier; accEnd.appendChild(o2);
    });

    accStart.value = 1;
    accEnd.value = 1;
    // å¡«å……ä»¶æ•°ä¸‹æ‹‰ï¼ˆ1~50ï¼‰
    const countSel = document.getElementById("acc-count");
    for(let i = 1; i <= 6; i++){
      const opt = document.createElement("option");
      opt.value = i;
      opt.textContent = i;
      countSel.appendChild(opt);
    }

    let accList = []; // ä¿å­˜å¤šä¸ªåŒºé—´è®°å½•

    function renderAccList() {
  const box = document.querySelector('#acc-list');

  if (accList.length === 0) {
    box.innerHTML = `<div class="muted">æš‚æ— è®°å½•</div>`;
    return;
  }

  let tAlloy = 0, tPolish = 0, tScroll = 0, tMoon = 0;

  let html = accList.map((item, index) => {
    tAlloy += item.alloy;
    tPolish += item.polish;
    tScroll += item.scroll;
    tMoon  += item.moon;

    return `
      <div style="margin-bottom:10px; padding-bottom:10px; border-bottom:1px solid var(--border);">
        
        <div style="
          display:flex;
          justify-content:space-between;
          align-items:center;
          margin-bottom:4px;
        ">
          <span>
            ç­‰çº§ï¼š${item.startName} â†’ ${item.endName}
            ï¼ˆÃ— ${item.count}ï¼‰
          </span>

          <button class="del-btn"
            data-index="${index}"
            style="
              background:#ef4444;
              border:none;
              padding:4px 10px;
              border-radius:6px;
              color:white;
              cursor:pointer;
              font-size:12px;
            ">
            åˆ é™¤
          </button>
        </div>

        åˆé‡‘ <b>${item.alloy}</b>ï½œ
        æŠ›å…‰ <b>${item.polish}</b>ï½œ
        å·è½´ <b>${item.scroll}</b>ï½œ
        ç¥ç€ <b>${item.moon}</b>
      </div>
    `;
  }).join('');

  html += `
  <hr style="border-color:var(--border); margin:10px 0;">
  <div>
  <div style="display:flex; align-items:center; gap:12px; flex-wrap:wrap;">

    <b>æ€»è®¡ï¼š</b>

    <span style="display:flex; align-items:center; gap:6px;">
      <img src="img/alloy.png" class="mat-icon">
      åˆé‡‘ ${tAlloy}
    </span>

    <span style="display:flex; align-items:center; gap:6px;">
      <img src="img/solution.png" class="mat-icon">
      æŠ›å…‰æ¶² ${tPolish}
    </span>
  </div>

  <div style="margin-left:60px;">

  <div style="display:flex; align-items:center; gap:12px;">

    <span style="display:flex; align-items:center; gap:6px;">
      <img src="img/plan.png" class="mat-icon">
      å·è½´ ${tScroll}
    </span>

    <span style="display:flex; align-items:center; gap:6px;">
      <img src="img/amber.png" class="mat-icon">
      ç¥ç€ ${tMoon}
    </span>
  </div>

  </div>
`;

  box.innerHTML = html;

  // ğŸ”¥ ä¸ºæ¯ä¸ªåˆ é™¤æŒ‰é’®ç»‘å®šåˆ é™¤äº‹ä»¶
  document.querySelectorAll(".del-btn").forEach(btn => {
    btn.onclick = function () {
      const i = parseInt(this.dataset.index);
      accList.splice(i, 1);  // åˆ é™¤è¯¥è®°å½•
      renderAccList();       // é‡æ–°æ¸²æŸ“
    };
  });
}


    /* æ·»åŠ åŒºé—´ */
    document.querySelector('#acc-add').onclick = function () {
      const s = parseInt(accStart.value);
      const e = parseInt(accEnd.value);
      const c = Math.max(1, parseInt(document.querySelector('#acc-count').value));

      if (e <= s) {
        alert("æœ€ç»ˆç­‰çº§ä¸èƒ½å°äºèµ·å§‹ç­‰çº§ï¼");
        return;
      }

      let alloy=0, polish=0, scroll=0, moon=0;

      for (const r of rows) {
        if (r.id > s && r.id <= e) {
          alloy  += r.alloy;
          polish += r.polish;
          scroll += r.scroll;
          moon   += r.moon;
        }
      }

      alloy  *= c;
      polish *= c;
      scroll *= c;
      moon   *= c;

      accList.push({ start:s, end:e, startName: rows.find(r => r.id === s).tier, endName: rows.find(r => r.id === e).tier, count:c, alloy, polish, scroll, moon });
      renderAccList();
    };

    /* æ¸…ç©ºæ‰€æœ‰åŒºé—´ */
    document.querySelector('#acc-clear').onclick = function () {
      accList = [];
      renderAccList();
    };
  </script>
</body>
</html>
